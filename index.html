<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script type="text/javascript">

    function resize_barcode() {
        /* To implement later */
    }

    function place_barcode_random(barcode){
        var new_angle = Math.random() * 360;
        barcode.style.transformOrigin = "50% 50%";
        barcode.style.transform = "rotate(" + new_angle + "deg)";

        var min_x = 0;
        var min_y = 0;
        var max_x = window.innerWidth; // - barcode_width;
        var max_y = window.innerHeight; // - barcode_height;
        var new_barcode_x = min_x + Math.random() * (max_x - min_x); 
        var new_barcode_y = min_y + Math.random() * (max_y - min_y);

        barcode.style.position = "absolute";
        barcode.style.left = new_barcode_x + 'px';
        barcode.style.top = new_barcode_y + 'px';

        barcode_box = barcode.getBoundingClientRect()
        console.log("barcode is now at " + barcode.style.left + ", " +  barcode.style.top)
        console.log(barcode_box)

        if (barcode_box['top'] < min_y || barcode_box['bottom'] > max_y || barcode_box['left'] < min_x || barcode_box['right'] > max_x){
            console.log("Positioned barcode out of canvas. Retrying.")
            place_barcode_random(barcode);
        }
    }

    function barcode_game() {
        var barcode = document.getElementById("barcode_for_game");
        place_barcode_random(barcode);
        document.addEventListener('keydown', function(event){
            if (event.key == "Enter") {
                place_barcode_random(barcode);
            }
        })
    }
    </script>
</head>

<body onload="barcode_game()">
    <img id="barcode_for_game" src="scan_me.svg">
    <div id="test"></div>
</body>
</html>